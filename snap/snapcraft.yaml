name: hermes-messenger # you probably want to 'snapcraft register <name>'
base: core18 # the base snap is the execution environment for this snap
version: '0.0.3+git' # just for humans, typically '1.2+git' or '1.3.2'
summary: Hermes Messenger is an unofficial Facebook Messenger app. # 79 char long summary
description: |
   Hermes Messenger is a unofficial electron Facebook messenger app made for linux smartphone (eg: librem 5, pinephone)
grade: devel # must be 'stable' to release into candidate/stable channels
confinement: devmode # use 'strict' once you have the right plugs and slots
license: GPL3

parts:
  electron-app:
    source: .
    plugin: nodejs
    nodejs-package-manager: npm

    stage-packages:
      - libappindicator1

    override-build: |
      npm install
      node_modules/.bin/electron-builder
      mkdir $SNAPCRAFT_PART_INSTALL/
      mv dist/linux-unpacked/* $SNAPCRAFT_PART_INSTALL/
    prime:
      - -node_modules

apps:
  hermes-messenger:
    command: env TMPDIR=$XDG_RUNTIME_DIR desktop-launch $SNAP/hermes-messenger
    plugs:
      - network